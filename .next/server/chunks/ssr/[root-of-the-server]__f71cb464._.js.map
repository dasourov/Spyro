{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/darkn/Spyro/components/Header.js"],"sourcesContent":["import Link from 'next/link';\r\nimport { useCart } from '../contexts/CartContext';\r\n\r\nexport default function Header() {\r\n  const { cartItems } = useCart();\r\n  \r\n  return (\r\n    <header className=\"bg-white py-4 px-6 flex justify-between items-center shadow-md\">\r\n      <div className=\"flex-grow text-center\">\r\n        <Link href=\"/\">\r\n          <span className=\"text-4xl font-bold cursor-pointer\" style={{ color: \"#136356\" }}>SPYRÓ</span>\r\n        </Link>\r\n      </div>\r\n      <div className=\"flex items-center\">\r\n        <Link href=\"/cart\">\r\n          <div className=\"relative cursor-pointer\">\r\n            <svg \r\n              xmlns=\"http://www.w3.org/2000/svg\" \r\n              className=\"h-8 w-8\" \r\n              fill=\"none\" \r\n              viewBox=\"0 0 24 24\" \r\n              stroke=\"#136356\"\r\n            >\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n            </svg>\r\n            {cartItems.length > 0 && (\r\n              <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs\">\r\n                {cartItems.reduce((total, item) => total + item.quantity, 0)}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </header>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,2HAAO;IAE7B,qBACE,qKAAC;QAAO,WAAU;;0BAChB,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC,gIAAI;oBAAC,MAAK;8BACT,cAAA,qKAAC;wBAAK,WAAU;wBAAoC,OAAO;4BAAE,OAAO;wBAAU;kCAAG;;;;;;;;;;;;;;;;0BAGrF,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC,gIAAI;oBAAC,MAAK;8BACT,cAAA,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCACC,OAAM;gCACN,WAAU;gCACV,MAAK;gCACL,SAAQ;gCACR,QAAO;0CAEP,cAAA,qKAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;4BAEtE,UAAU,MAAM,GAAG,mBAClB,qKAAC;gCAAK,WAAU;0CACb,UAAU,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1E","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/darkn/Spyro/pages/payment.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useCart } from '../contexts/CartContext';\r\nimport Link from 'next/link';\r\nimport Header from '../components/Header';\r\n\r\nexport default function PaymentPage() {\r\n  const { cartItems, getTotalPrice, clearCart } = useCart();\r\n  const [paymentMethod] = useState('card'); // locked to card\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [paymentComplete, setPaymentComplete] = useState(false);\r\n  const [tableId, setTableId] = useState(null);\r\n\r\n  // Load table_id from localStorage (set on OrderPage)\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('table_id');\r\n    if (stored) setTableId(stored);\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    if (e) e.preventDefault();\r\n    if (!tableId) return alert('Table ID not found.');\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      const orderDetails = {\r\n        table_id: tableId,\r\n        items: cartItems.map(item => ({\r\n          name: item.name,\r\n          quantity: item.quantity,\r\n          price: item.price\r\n        })),\r\n        total: getTotalPrice(),\r\n        payment_method: 'card',\r\n        notes: 'Card'\r\n      };\r\n\r\n      // Send order to FastAPI backend\r\n      const response = await fetch(\"https://spyro-pgc7.onrender.com/api/orders/\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(orderDetails),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.detail || \"Failed to place order\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"Order created:\", result);\r\n\r\n      setPaymentComplete(true);\r\n      clearCart();\r\n\r\n    } catch (error) {\r\n      console.error(\"Error during checkout:\", error);\r\n      setIsProcessing(false);\r\n      alert(error.message);\r\n    }\r\n  };\r\n\r\n  if (paymentComplete) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col\" style={{ backgroundColor: \"#136356\" }}>\r\n        <Header />\r\n        <main className=\"flex-grow px-4 py-8\">\r\n          <div className=\"max-w-md mx-auto\">\r\n            <div className=\"bg-white shadow-md p-8 text-center\">\r\n              <div className=\"w-16 h-16 bg-green-100 flex items-center justify-center mx-auto mb-6\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-green-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">Payment Successful!</h1>\r\n              <p className=\"text-gray-600 mb-6\">Your order has been placed and will be served soon.</p>\r\n\r\n              <Link href=\"/\">\r\n                <button className=\"w-full py-3 font-bold text-white transition-colors duration-300\"\r\n                  style={{ backgroundColor: \"#136356\", border: \"none\" }}>\r\n                  Back to Home\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\" style={{ backgroundColor: \"#136356\" }}>\r\n      <Header />\r\n      <main className=\"flex-grow px-4 py-8\">\r\n        <div className=\"max-w-md mx-auto\">\r\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Payment {tableId && `(Table ${tableId})`}</h1>\r\n          <p className=\"text-gray-200 mb-8\">Complete your order</p>\r\n\r\n          {/* Order Summary */}\r\n          <div className=\"bg-white shadow-md overflow-hidden mb-6\">\r\n            <div className=\"p-4 bg-gray-50 border-t border-gray-100\">\r\n              <h2 className=\"font-semibold text-gray-800\">Order Summary</h2>\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <ul className=\"divide-y divide-gray-100\">\r\n                {cartItems.map(item => (\r\n                  <li key={item.id} className=\"py-3 flex justify-between\">\r\n                    <div>\r\n                      <span className=\"font-medium\">{item.name}</span>\r\n                      <span className=\"text-gray-500 text-sm ml-2\">x{item.quantity}</span>\r\n                    </div>\r\n                    <span>{item.price * item.quantity} Ft</span>\r\n                  </li>\r\n                ))}\r\n                <li className=\"pt-3 mt-3 flex justify-between font-bold\">\r\n                  <span>Total</span>\r\n                  <span>{getTotalPrice()} Ft</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Payment Method */}\r\n          <div className=\"bg-white shadow-md overflow-hidden\">\r\n            <div className=\"p-4 bg-gray-50 border-t border-gray-100\">\r\n              <h2 className=\"font-semibold text-gray-800\">Payment Method</h2>\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <div className=\"flex justify-center mb-6\">\r\n                <button\r\n                  className=\"py-3 px-6 text-center font-medium transition-colors duration-300 bg-gray-100\"\r\n                  style={{ border: `2px solid #136356` }}\r\n                  disabled\r\n                >\r\n                  Pay with Card\r\n                </button>\r\n              </div>\r\n\r\n              <p className=\"text-red-500 font-bold mb-6 text-center\">\r\n                Our agent will come with a POS machine and you can pay with card.\r\n              </p>\r\n\r\n              <button\r\n                onClick={handleSubmit}\r\n                disabled={isProcessing}\r\n                className={`w-full py-3 font-bold text-white transition-colors duration-300 ${isProcessing ? 'bg-gray-400' : ''}`}\r\n                style={{ backgroundColor: isProcessing ? \"#cccccc\" : \"#136356\", border: \"none\" }}\r\n              >\r\n                {isProcessing ? 'Processing...' : 'Confirm Order'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center\">\r\n            <Link href=\"/cart\" className=\"text-white hover:text-gray-200 font-medium\">\r\n              ← Back to Cart\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAA,2HAAO;IACvD,MAAM,CAAC,cAAc,GAAG,IAAA,+GAAQ,EAAC,SAAS,iBAAiB;IAC3D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+GAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,qDAAqD;IACrD,IAAA,gHAAS,EAAC;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ,WAAW;IACzB,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,IAAI,GAAG,EAAE,cAAc;QACvB,IAAI,CAAC,SAAS,OAAO,MAAM;QAE3B,gBAAgB;QAEhB,IAAI;YACF,MAAM,eAAe;gBACnB,UAAU;gBACV,OAAO,UAAU,GAAG,CAAC,CAAA,OAAQ,CAAC;wBAC5B,MAAM,KAAK,IAAI;wBACf,UAAU,KAAK,QAAQ;wBACvB,OAAO,KAAK,KAAK;oBACnB,CAAC;gBACD,OAAO;gBACP,gBAAgB;gBAChB,OAAO;YACT;YAEA,gCAAgC;YAChC,MAAM,WAAW,MAAM,MAAM,+CAA+C;gBAC1E,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,MAAM,IAAI;YACtC;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,QAAQ,GAAG,CAAC,kBAAkB;YAE9B,mBAAmB;YACnB;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,gBAAgB;YAChB,MAAM,MAAM,OAAO;QACrB;IACF;IAEA,IAAI,iBAAiB;QACnB,qBACE,qKAAC;YAAI,WAAU;YAA6B,OAAO;gBAAE,iBAAiB;YAAU;;8BAC9E,qKAAC,wHAAM;;;;;8BACP,qKAAC;oBAAK,WAAU;8BACd,cAAA,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAI,WAAU;8CACb,cAAA,qKAAC;wCAAI,OAAM;wCAA6B,WAAU;wCAAyB,SAAQ;wCAAY,MAAK;kDAClG,cAAA,qKAAC;4CAAK,UAAS;4CAAU,GAAE;4CAAwI,UAAS;;;;;;;;;;;;;;;;8CAGhL,qKAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,qKAAC;oCAAE,WAAU;8CAAqB;;;;;;8CAElC,qKAAC,gIAAI;oCAAC,MAAK;8CACT,cAAA,qKAAC;wCAAO,WAAU;wCAChB,OAAO;4CAAE,iBAAiB;4CAAW,QAAQ;wCAAO;kDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASvE;IAEA,qBACE,qKAAC;QAAI,WAAU;QAA6B,OAAO;YAAE,iBAAiB;QAAU;;0BAC9E,qKAAC,wHAAM;;;;;0BACP,qKAAC;gBAAK,WAAU;0BACd,cAAA,qKAAC;oBAAI,WAAU;;sCACb,qKAAC;4BAAG,WAAU;;gCAAqC;gCAAS,WAAW,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;;;;;;;sCAC3F,qKAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAGlC,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAI,WAAU;8CACb,cAAA,qKAAC;wCAAG,WAAU;kDAA8B;;;;;;;;;;;8CAE9C,qKAAC;oCAAI,WAAU;8CACb,cAAA,qKAAC;wCAAG,WAAU;;4CACX,UAAU,GAAG,CAAC,CAAA,qBACb,qKAAC;oDAAiB,WAAU;;sEAC1B,qKAAC;;8EACC,qKAAC;oEAAK,WAAU;8EAAe,KAAK,IAAI;;;;;;8EACxC,qKAAC;oEAAK,WAAU;;wEAA6B;wEAAE,KAAK,QAAQ;;;;;;;;;;;;;sEAE9D,qKAAC;;gEAAM,KAAK,KAAK,GAAG,KAAK,QAAQ;gEAAC;;;;;;;;mDAL3B,KAAK,EAAE;;;;;0DAQlB,qKAAC;gDAAG,WAAU;;kEACZ,qKAAC;kEAAK;;;;;;kEACN,qKAAC;;4DAAM;4DAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAO/B,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAI,WAAU;8CACb,cAAA,qKAAC;wCAAG,WAAU;kDAA8B;;;;;;;;;;;8CAE9C,qKAAC;oCAAI,WAAU;;sDACb,qKAAC;4CAAI,WAAU;sDACb,cAAA,qKAAC;gDACC,WAAU;gDACV,OAAO;oDAAE,QAAQ,CAAC,iBAAiB,CAAC;gDAAC;gDACrC,QAAQ;0DACT;;;;;;;;;;;sDAKH,qKAAC;4CAAE,WAAU;sDAA0C;;;;;;sDAIvD,qKAAC;4CACC,SAAS;4CACT,UAAU;4CACV,WAAW,CAAC,gEAAgE,EAAE,eAAe,gBAAgB,IAAI;4CACjH,OAAO;gDAAE,iBAAiB,eAAe,YAAY;gDAAW,QAAQ;4CAAO;sDAE9E,eAAe,kBAAkB;;;;;;;;;;;;;;;;;;sCAKxC,qKAAC;4BAAI,WAAU;sCACb,cAAA,qKAAC,gIAAI;gCAAC,MAAK;gCAAQ,WAAU;0CAA6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQtF","debugId":null}}]
}